dataset:
  - type: sc2-replay-outcome
    args:
      features:
        - minimap_features
        - scalar_features
      timepoints:
        min: 2
        max: 20
        step: 0.5
      sampler_cfg:
        type: sql
        args:
          database: $ENV:gamedata.db
          filter_query:
            ["game_length > 6720", "read_success = 1", "parse_success = 1"]
    val_loader:
      type: PYTORCH_V1
      args:
        batch_size: 64
        drop_last: true
    train_loader:
      type: PYTORCH_V1
      args:
        shuffle: true
        batch_size: 32
        drop_last: true
criterion:
  - type: win-bce
    args: {}
model:
  - type: sequence-prediction
    args:
      image_enc:
        type: image-v1
        args: {}
      scalar_enc:
        type: scalar-v2
        args:
          strategy: batch_norm
      decoder:
        type: lstm-v1
        args:
          hidden_size: 64
          num_layers: 4
    optimizer:
      type: adam
      args:
        step_interval: 1
        lr: 1.e-4
      scheduler:
        type: poly
        args:
          max_iter: 5
          power: 0.9
logger:
  interval: 50
